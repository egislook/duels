<div style="overflow:hidden;">
<table class="left hbr clear" cellspacing="0" style="width:80%;">
     {{? it.tournaments.length>0}}
        {{~it.tournaments :t:i}}
            <tr>
                {{
                    var prize = 'rare';
                    if(t.prize_type=='unc'){prize='uncommon'}
                    else if(t.prize_type=='com'){prize='common'};
                    
                    var def='dark textLight textSmall';
                    var spec='textBig';
                    if(t.state!='ended' && t.state!='join'){def='accept textLight textSmall'} 
                    else if(t.state=='ended'){def='delete textLight textSmall'};
                    
                    var date = new Date();
                    var dd = date.getDate();
                    var mm = date.getMonth()+1;
                    var yyyy = date.getFullYear();
                    var h = date.getHours();
                    var m = date.getMinutes();
                    var s = date.getSeconds();
                    var time = s+(m*60)+(h*3600);
                    var end = t.time.split(":");
                    var deadline = (end[0]*3600)+(end[1]*60);
                    if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm} date = yyyy+'-'+mm+'-'+dd;
                    var start = 'tomorrow';
                    if(date == t.date && t.state=='join'){start=deadline-time;spec='textLarge time-left'}
                    else if(t.state=='ended'){start='finished'};
                    if(t.state=='final'){start='in progress'};
                }}
                <td class="{{=def}}"></td>
                <td class="{{=def}}"></td>
                <td class="{{=def}} {{=spec}}" align="center">{{=start}}</td>
                <td width="80" align="center" class="{{=def}} data-text">buy-in</td>
                <td width="80" align="center" class="{{=def}} data-text">mode</td>
                <td width="95" class="{{=def}}"></td>
                <td width="80" align="center" class="{{=def}} data-text">prize</td>
            </tr>
            <tr class="t">
                <td class="textExtra textLightGrey" onclick="window.open('/t/{{=t.id}}', '_self');return false;">#{{=i+1}}</td>
                <td onclick="window.open('/t/{{=t.id}}', '_self');return false;">
                    <img src="http://s26.postimg.org/b7kvj1opx/cocks.png">
                </td>
                <td class="data-text" onclick="window.open('/t/{{=t.id}}', '_self');return false;">
                    <div class="textDark"><b>random</b></div>
                    <div class="textLarge up_case textLightGrey">{{=t.name}}</div>
                    <div class="textSmall textDark">1 duel with 1 random opponent. Fast way find out if u are lucky today...</div>
                </td>
                <td class="{{=t.buyin_type}} ticket textLight" align="right">
                    <div class="left dark textSmall textLight count">{{=t.buyin_count}}</div>
                    <div class="clear"><b>Any</b></div>
                    <div class="textSmall">{{=prize}}</div>
                    <div>item</div>
                </td>
                <td align="center">
                    <div class="textDark"><b>arshom</b></div>
                    <div class="textSmall textLightGrey">all random</div>
                    <div class="textSmall textLightGrey">same hero</div>
                    <div class="textSmall textLightGrey">only mid</div>
                    <div class="textDark textLarge">1x1</div>
                </td>
                {{? t.state == 'join' && (t.maxplayers != t.players || t.class == 'rcf')}}
                    {{? t.users.joined[it.user.steamid]}}
                        <td>
                            <div>{{= t.users.joined[it.user.steamid].key}} <div class="right textSmall">{{=t.players}}</div></div>
                        </td>
                    {{?? t.users.approved[it.user.steamid]}}
                        <td>
                            <div>Confirmed <div class="right textSmall">{{=t.players}}</div></div>
                        </td>
                    {{??}}
                        <td align="center" class="accept click textLight" onclick="window.open('/join/{{=t.id}}', '_self');return false;">
                            <div class="textBig">Join</div> 
                            <div class="textSmall">Now</div>
                        </td>
                    {{?}}
                {{??}}
                    <td align="center" class="textDark">
                        <div class="textSmall">Registration</div> 
                        <div class="textSmall">Finished</div>
                    </td>
                {{?}}
                <td class="{{=t.prize_type}} ticket textLight" align="right">
                    <div class="left dark textSmall textLight count">{{=t.prize_count}}</div>
                    <div class="clear"><b>Any</b></div>
                    <div class="textSmall">{{=prize}}</div>
                    <div>item</div>
                </td>
            </tr>
                {{? t.joined>0 || t.players>0}}
                    <tr>
                        <td colspan="7" class="h-line"></td>
                    </tr>
                    <tr>
                        <td colspan="7">
                            {{? t.joined>0}}
                            <div class="left textLightGrey textSmall data-text hbr"><b class="textDark">joined</b><div>players</div></div>
                                {{ for(var id in t.users.joined) {}}
                                    <img class="hbr hbl left" width="30" src="{{=it.u[id].avatar}}"/>
                                {{ } }}
                            {{?}}
                            {{? t.players>0}}
                            <div class="right textLightGrey textSmall data-text hbl"><b class="textDark">confirmed</b><div>players</div></div>
                                {{ for(var id in t.users.approved) {}}
                                    <img class="hbr hbl right" width="30" src="{{=it.u[id].avatar}}"/>
                                {{ } }}
                            {{?}}
                        </td>
                    </tr>
                {{?}}
                {{? t.state == 'final'}}
                    <tr>
                        <td colspan="7" class="h-line"></td>
                    </tr>
                    <tr>
                        <td class="textSmall textLightGrey" align="center" colspan="7">
                            duels
                        </td>
                    </tr>
                    <tr>
                        <td align="center" colspan="7">
                            <table cellspacing="0" class="textLight data-list">
                                <tr>
                                    <td width="50%">
                                        <div class="accept space textSmall">The Radiant</div>
                                    </td>
                                    <td width="40">
                                        <img height="42" src="http://s26.postimg.org/pcpri3zvp/radiant.jpg">
                                    </td>
                                    <td width="40">
                                        <img height="42" src="http://s26.postimg.org/66ckexjdx/dire.jpg">
                                    </td>
                                    <td width="50%">
                                        <div class="delete space textSmall">The Dire</div>
                                    </td>
                                </tr>
                                {{~t.states.final.duels :duel}}
                                <tr onclick="window.open('/g/{{=duel.id}}', '_self');">
                                    
                                        {{? duel.winner && duel.winner == it.g[duel.id].t1[0].id}}
                                            <td class="edit">
                                                {{=it.u[it.g[duel.id].t1[0].id].name}}
                                            </td>
                                        {{??}}
                                            <td>
                                            {{=it.u[it.g[duel.id].t1[0].id].name}}
                                            </td>
                                        {{?}}
                                        
                                    
                                    <td>
                                        <img width="67" src="http://media.steampowered.com/apps/dota2/images/heroes/{{=it.g[duel.id].t1[0].hero.url}}_sb.png"/>
                                    </td>
                                    <td>
                                        <img width="67" src="http://media.steampowered.com/apps/dota2/images/heroes/{{=it.g[duel.id].t2[0].hero.url}}_sb.png"/>
                                    </td>
                                        {{? duel.winner && duel.winner == it.g[duel.id].t2[0].id}}
                                            <td class="edit">
                                                {{=it.u[it.g[duel.id].t2[0].id].name}}
                                            </td>
                                        {{??}}
                                            <td>
                                            {{=it.u[it.g[duel.id].t2[0].id].name}}
                                            </td>
                                        {{?}}
                                </tr>
                                {{~}}
                            </table>
                        </td>
                    </tr>
                {{?}}
            <tr>
                <td colspan="7" class="h-line"></td>
            </tr>
            <tr>
                <td height="10"></td>
            </tr>
        {{~}}
    {{?}}
</table>
<table class="textLightGrey textSmall hbl" style="width:20%">
    <tr>
        <td>
            <div class="textSmall">Level</div>
        </td>
        <td align="center" colspan="2">
            <div class="textSmall">Player</div>
        </td>
        
        <td>
            <div class="textSmall">Points</div>
        </td>
    </tr>
    <tr>
        <td colspan="4" class="b-t"></td>
    </tr>
    {{ for(var r in it.r){}}
        <tr>
            <td align="center">{{=it.r[r].lvl}}</td>
            <td><img height="30" src="{{=it.u[it.r[r].steamid].avatar}}"></td>
            <td class="textDark">{{=it.u[it.r[r].steamid].name}}</td>
            <td align="center">{{=it.r[r].points}}</td>
        </tr>
        <tr>
            <td colspan="4" class="h-line"></td>
        </tr>
    {{ } }}
</table>
</div>
<script> timer(); </script>
 {{#def.test}}